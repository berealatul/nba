{
  "info": {
    "name": "NBA API Collection v2.0",
    "description": "Complete API collection for NBA Assessment System - All 20 Endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost/nba/api",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"employeeIdOrEmail\": \"1001\",\n  \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/login",
              "host": ["{{base_url}}"],
              "path": ["login"]
            },
            "description": "Authenticate user using Employee ID or Email and receive JWT token"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data.token) {",
                  "        pm.collectionVariables.set('jwt_token', response.data.token);",
                  "        console.log('JWT Token saved:', response.data.token);",
                  "    }",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/logout",
              "host": ["{{base_url}}"],
              "path": ["logout"]
            },
            "description": "Logout user (client-side token removal)"
          }
        }
      ]
    },
    {
      "name": "Department",
      "item": [
        {
          "name": "Get My Department",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/department",
              "host": ["{{base_url}}"],
              "path": ["department"]
            },
            "description": "Get department information for the authenticated user"
          }
        }
      ]
    },
    {
      "name": "User Profile",
      "item": [
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/profile",
              "host": ["{{base_url}}"],
              "path": ["profile"]
            },
            "description": "Retrieve authenticated user's profile information"
          }
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"newusername\",\n  \"email\": \"newemail@nba.edu\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/profile",
              "host": ["{{base_url}}"],
              "path": ["profile"]
            },
            "description": "Update authenticated user's profile information"
          }
        }
      ]
    },
    {
      "name": "Courses",
      "item": [
        {
          "name": "Get Faculty Courses",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/courses",
              "host": ["{{base_url}}"],
              "path": ["courses"]
            },
            "description": "Get all courses assigned to the authenticated faculty member"
          }
        },
        {
          "name": "Get Course Tests",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/course-tests?course_id=1",
              "host": ["{{base_url}}"],
              "path": ["course-tests"],
              "query": [
                {
                  "key": "course_id",
                  "value": "1",
                  "description": "Course ID"
                }
              ]
            },
            "description": "Get all tests for a specific course"
          }
        }
      ]
    },
    {
      "name": "Assessments",
      "item": [
        {
          "name": "Create Assessment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"course_id\": 1,\n  \"name\": \"Mid Semester\",\n  \"full_marks\": 50,\n  \"pass_marks\": 20,\n  \"question_paper_pdf\": \"base64_encoded_pdf_string...\",\n  \"questions\": [\n    {\n      \"question_number\": 1,\n      \"co\": 1,\n      \"max_marks\": 10\n    },\n    {\n      \"question_number\": 2,\n      \"sub_question\": \"a\",\n      \"co\": 2,\n      \"max_marks\": 5\n    },\n    {\n      \"question_number\": 2,\n      \"sub_question\": \"b\",\n      \"co\": 2,\n      \"max_marks\": 5\n    },\n    {\n      \"question_number\": 3,\n      \"co\": 3,\n      \"max_marks\": 15,\n      \"is_optional\": true\n    },\n    {\n      \"question_number\": 4,\n      \"co\": 4,\n      \"max_marks\": 15\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/assessment",
              "host": ["{{base_url}}"],
              "path": ["assessment"]
            },
            "description": "Create test with questions. PDF is optional. Sum of question marks must equal full_marks."
          }
        },
        {
          "name": "Get Assessment Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/assessment?test_id=1",
              "host": ["{{base_url}}"],
              "path": ["assessment"],
              "query": [
                {
                  "key": "test_id",
                  "value": "1",
                  "description": "Test ID"
                }
              ]
            },
            "description": "Get test details with all questions"
          }
        }
      ]
    },
    {
      "name": "Questions (CRUD)",
      "item": [
        {
          "name": "Update Question",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"co_number\": 3,\n  \"max_marks\": 12.5\n}"
            },
            "url": {
              "raw": "{{base_url}}/questions/1",
              "host": ["{{base_url}}"],
              "path": ["questions", "1"]
            },
            "description": "Update question CO mapping or max marks. Auto re-aggregates all student marks."
          }
        },
        {
          "name": "Delete Question",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/questions/1",
              "host": ["{{base_url}}"],
              "path": ["questions", "1"]
            },
            "description": "Delete question. Cascade deletes all related marks."
          }
        }
      ]
    },
    {
      "name": "Marks Entry",
      "item": [
        {
          "name": "Bulk Marks Entry",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"test_id\": 1,\n  \"marks_entries\": [\n    {\n      \"student_rollno\": \"CS101\",\n      \"question_number\": 1,\n      \"marks_obtained\": 8.5\n    },\n    {\n      \"student_rollno\": \"CS101\",\n      \"question_number\": 2,\n      \"sub_question\": \"a\",\n      \"marks_obtained\": 4.0\n    },\n    {\n      \"student_rollno\": \"CS102\",\n      \"question_number\": 1,\n      \"marks_obtained\": 9.0\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/marks/bulk",
              "host": ["{{base_url}}"],
              "path": ["marks", "bulk"]
            },
            "description": "Enter marks for multiple students/questions in one request. Auto CO aggregation. Partial failure support."
          }
        },
        {
          "name": "Save Marks by Question",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"test_id\": 1,\n  \"student_id\": \"CS101\",\n  \"marks\": [\n    {\n      \"question_identifier\": \"1\",\n      \"marks\": 5\n    },\n    {\n      \"question_identifier\": \"2a\",\n      \"marks\": 3\n    },\n    {\n      \"question_identifier\": \"2b\",\n      \"marks\": 2.5\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/marks/by-question",
              "host": ["{{base_url}}"],
              "path": ["marks", "by-question"]
            },
            "description": "Save per-question marks for a student. System automatically calculates CO totals."
          }
        },
        {
          "name": "Save Marks by CO",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"test_id\": 1,\n  \"student_id\": \"CS102\",\n  \"CO1\": 10,\n  \"CO2\": 8.5,\n  \"CO3\": 15,\n  \"CO4\": 7,\n  \"CO5\": 0,\n  \"CO6\": 0\n}"
            },
            "url": {
              "raw": "{{base_url}}/marks/by-co",
              "host": ["{{base_url}}"],
              "path": ["marks", "by-co"]
            },
            "description": "Directly save CO-aggregated marks for a student (manual entry method)"
          }
        }
      ]
    },
    {
      "name": "Marks Viewing",
      "item": [
        {
          "name": "Get Student Marks",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/marks?test_id=1&student_id=CS101",
              "host": ["{{base_url}}"],
              "path": ["marks"],
              "query": [
                {
                  "key": "test_id",
                  "value": "1",
                  "description": "Test ID"
                },
                {
                  "key": "student_id",
                  "value": "CS101",
                  "description": "Student Roll Number"
                }
              ]
            },
            "description": "Get both raw marks and CO-aggregated marks for a specific student"
          }
        },
        {
          "name": "Get All Test Marks",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/marks/test/1",
              "host": ["{{base_url}}"],
              "path": ["marks", "test", "1"]
            },
            "description": "Get CO-aggregated marks for all students in a test"
          }
        },
        {
          "name": "Get All Test Marks with Raw Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/marks/test/1?include_raw=true",
              "host": ["{{base_url}}"],
              "path": ["marks", "test", "1"],
              "query": [
                {
                  "key": "include_raw",
                  "value": "true",
                  "description": "Include per-question raw marks"
                }
              ]
            },
            "description": "Get CO totals + per-question marks for all students"
          }
        }
      ]
    },
    {
      "name": "Marks CRUD",
      "item": [
        {
          "name": "Update Raw Marks",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"marks_obtained\": 9.5\n}"
            },
            "url": {
              "raw": "{{base_url}}/marks/raw/1",
              "host": ["{{base_url}}"],
              "path": ["marks", "raw", "1"]
            },
            "description": "Update a single raw marks entry. Auto re-aggregates CO totals."
          }
        },
        {
          "name": "Delete Raw Marks",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/marks/raw/1",
              "host": ["{{base_url}}"],
              "path": ["marks", "raw", "1"]
            },
            "description": "Delete a single raw marks entry. Auto re-aggregates CO totals."
          }
        },
        {
          "name": "Delete All Student Marks",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/marks/student/1/CS101",
              "host": ["{{base_url}}"],
              "path": ["marks", "student", "1", "CS101"]
            },
            "description": "Delete all marks for a student in a test (both raw and aggregated)"
          }
        }
      ]
    },
    {
      "name": "Enrollment",
      "item": [
        {
          "name": "Enroll Students in Course",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"students\": [\n    {\n      \"rollno\": \"CS101\",\n      \"name\": \"John Doe\"\n    },\n    {\n      \"rollno\": \"CS102\",\n      \"name\": \"Jane Smith\"\n    },\n    {\n      \"rollno\": \"CS103\",\n      \"name\": \"Bob Johnson\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/courses/1/enroll",
              "host": ["{{base_url}}"],
              "path": ["courses", "1", "enroll"]
            },
            "description": "Bulk enroll students. Creates students if they don't exist. Prevents duplicate enrollments."
          }
        },
        {
          "name": "Get Course Enrollments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/courses/1/enrollments",
              "host": ["{{base_url}}"],
              "path": ["courses", "1", "enrollments"]
            },
            "description": "Get all enrolled students for a course"
          }
        },
        {
          "name": "Get Course Enrollments with Test Questions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/courses/1/enrollments?test_id=1",
              "host": ["{{base_url}}"],
              "path": ["courses", "1", "enrollments"],
              "query": [
                {
                  "key": "test_id",
                  "value": "1",
                  "description": "Test ID to include questions"
                }
              ]
            },
            "description": "Get enrolled students + test questions for marks entry"
          }
        }
      ]
    },
    {
      "name": "Test Cases",
      "item": [
        {
          "name": "Login - Invalid Credentials",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"employeeIdOrEmail\": \"admin@nba.edu\",\n  \"password\": \"wrongpassword\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/login",
              "host": ["{{base_url}}"],
              "path": ["login"]
            },
            "description": "Test login with invalid credentials - should return 401"
          }
        },
        {
          "name": "Get Profile - No Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/profile",
              "host": ["{{base_url}}"],
              "path": ["profile"]
            },
            "description": "Test accessing profile without authentication - should return 401"
          }
        },
        {
          "name": "Create Assessment - Invalid CO",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"course_id\": 1,\n  \"name\": \"Invalid Test\",\n  \"full_marks\": 50,\n  \"pass_marks\": 20,\n  \"questions\": [\n    {\n      \"question_number\": 1,\n      \"co\": 7,\n      \"max_marks\": 50\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/assessment",
              "host": ["{{base_url}}"],
              "path": ["assessment"]
            },
            "description": "Test with CO > 6 - should return 400"
          }
        },
        {
          "name": "Bulk Marks - Marks Exceed Maximum",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"test_id\": 1,\n  \"marks_entries\": [\n    {\n      \"student_rollno\": \"CS101\",\n      \"question_number\": 1,\n      \"marks_obtained\": 999\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/marks/bulk",
              "host": ["{{base_url}}"],
              "path": ["marks", "bulk"]
            },
            "description": "Test marks exceeding question maximum - should fail with partial results"
          }
        }
      ]
    }
  ]
}